<!DOCTYPE html>
<html lang="vi" data-theme="default">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>√îN T·∫¨P TI·∫æNG ANH 10 - H·ªåC K·ª≤ I</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1C3FAA',
                        success: '#91C714',
                        danger: '#D32929',
                        pink: '#EC4899',
                        green: '#10B981',
                        blue: '#3B82F6',
                        red: '#EF4444',
                        purple: '#8B5CF6'
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --primary-color: #1C3FAA;
            --success-color: #91C714;
            --danger-color: #D32929;
            --bg-color: #f8fafc;
            --card-bg: rgba(255,255,255,0.9);
            --text-primary: #1e293b;
            --text-secondary: #64748b;
        }
        [data-theme="pink"] { --primary-color: #EC4899; --success-color: #10B981; --danger-color: #EF4444; }
        [data-theme="green"] { --primary-color: #10B981; --success-color: #EC4899; --danger-color: #EF4444; }
        [data-theme="blue"] { --primary-color: #3B82F6; --success-color: #10B981; --danger-color: #EF4444; }
        [data-theme="red"] { --primary-color: #EF4444; --success-color: #10B981; --danger-color: #EC4899; }
        [data-theme="purple"] { --primary-color: #8B5CF6; --success-color: #10B981; --danger-color: #EF4444; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-color);
            margin: 0;
            overflow-x: hidden;
            position: relative;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .animated-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            background: linear-gradient(-45deg, var(--primary-color), var(--primary-color)80%, #ffffff20);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
        }
        .animated-bg::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 50%, rgba(120,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255,119,198,0.3) 0%, transparent 50%),
                        radial-gradient(circle at 40% 80%, rgba(120,219,255,0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(180deg); } }
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 1rem;
            position: relative;
            z-index: 1;
        }
        .card {
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1), 0 0 0 1px rgba(255,255,255,0.2);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .header {
            background: linear-gradient(135deg, var(--primary-color), rgba(28,63,170,0.8));
            color: white;
            padding: 40px 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: url('https://i.ibb.co/HfM9CsKV/V-1.png') no-repeat center/cover;
            margin: 0 auto 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            border: 4px solid white;
        }
        .header h1 {
            font-size: 2.8rem;
            font-weight: 800;
            margin: 0;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .mode-card {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
            backdrop-filter: blur(20px);
        }
        .mode-btn {
            display: block;
            width: 100%;
            max-width: 500px;
            margin: 28px auto;
            padding: 28px;
            border-radius: 20px;
            font-size: 20px;
            font-weight: 600;
            background: rgba(255,255,255,0.95);
            border: 2px solid rgba(28,63,170,0.2);
            color: var(--primary-color);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .mode-btn:hover {
            border-color: var(--primary-color);
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 20px 40px rgba(28,63,170,0.2);
        }
        .question-card {
            padding: 32px 20px;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }
        .part-title {
            font-size: 26px;
            font-weight: 800;
            color: var(--primary-color);
            text-align: center;
            margin: 32px 0 24px;
            text-transform: uppercase;
        }
        .question-num {
            font-size: 26px;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 16px;
            text-align: center;
        }
        .question-text {
            font-size: 18px;
            line-height: 1.7;
            margin-bottom: 28px;
            color: var(--text-primary);
        }
        .option {
            background: rgba(248,250,252,0.8);
            border: 2px solid rgba(226,232,240,0.8);
            border-radius: 16px;
            padding: 20px;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }
        .option input {
            margin-right: 16px;
            transform: scale(1.3);
            accent-color: var(--primary-color);
        }
        .option:hover {
            background: rgba(238,242,255,0.8);
            border-color: var(--primary-color);
            transform: translateX(8px);
        }
        .fill-input {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            border-radius: 12px;
            border: 2px solid rgba(226,232,240,0.8);
            margin-top: 12px;
            transition: border-color 0.3s;
        }
        .fill-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(28,63,170,0.1);
        }
        .submit-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), rgba(28,63,170,0.8));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 19px;
            font-weight: 600;
            margin-top: 32px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(28,63,170,0.3);
            transition: all 0.3s;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(28,63,170,0.4);
        }
        .feedback {
            margin-top: 24px;
            padding: 24px;
            border-radius: 16px;
            font-size: 20px;
            text-align: center;
            font-weight: 700;
            backdrop-filter: blur(10px);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s;
        }
        .feedback.show { opacity: 1; transform: translateY(0); }
        .feedback.correct { background: rgba(212,237,218,0.9); color: #155724; border: 1px solid var(--success-color); }
        .feedback.wrong { background: rgba(252,232,232,0.9); color: #721c24; border: 1px solid var(--danger-color); }
        .note {
            background: linear-gradient(135deg, var(--primary-color), rgba(28,63,170,0.9));
            color: white !important;
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            box-shadow: 0 10px 30px rgba(28,63,170,0.4);
            font-size: 16px;
            line-height: 1.8;
        }
        .note * { color: white !important; }
        .tips-card {
            background: linear-gradient(135deg, var(--primary-color), rgba(0,0,0,0.2));
            color: white;
            border-radius: 20px;
            padding: 32px 24px;
            margin: 32px 0;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            text-align: center;
        }
        .tips-card h3 {
            font-size: 28px;
            font-weight: 800;
            color: white;
            margin-bottom: 24px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        .tips-card ul {
            list-style: none;
            padding: 0;
            max-width: 600px;
            margin: 0 auto;
            text-align: left;
        }
        .tips-card li {
            font-size: 17px;
            margin-bottom: 18px;
            padding-left: 36px;
            position: relative;
            color: white;
        }
        .tips-card li::before {
            content: '‚úÖ';
            position: absolute;
            left: 0;
            font-size: 20px;
        }
        .start-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-color), rgba(0,0,0,0.2));
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 19px;
            font-weight: 700;
            margin-top: 32px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
        }
        .settings-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255,255,255,0.95);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .settings-icon {
            width: 32px;
            height: 32px;
            background: url('https://cdn-icons-png.flaticon.com/512/2040/2040504.png') no-repeat center;
            background-size: contain;
        }
        .setting-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
            align-items: center;
            justify-content: center;
        }
        .setting-overlay.show { display: flex; }
        .theme-selector {
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            backdrop-filter: blur(10px);
            text-align: center;
            max-width: 90%;
        }
        .theme-btn {
            display: inline-block;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 10px;
            cursor: pointer;
            border: 4px solid transparent;
            transition: all 0.3s;
        }
        .theme-btn.active {
            border-color: #fff;
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(0,0,0,0.4);
        }
        .keyboard-hint {
            margin: 20px 0;
            font-size: 16px;
            color: var(--primary-color);
            font-weight: 600;
            text-align: center;
        }
        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            .header .avatar { width: 80px; height: 80px; }
            .mode-card { padding: 32px 16px; }
            .mode-btn { padding: 24px; font-size: 19px; margin: 24px auto; }
            .question-card { padding: 28px 16px; }
            .part-title, .question-num { font-size: 22px; }
            .question-text { font-size: 17px; }
            .option { padding: 18px; font-size: 16px; }
            .tips-card { padding: 28px 20px; }
            .tips-card h3 { font-size: 24px; }
            .tips-card li { font-size: 16px; padding-left: 32px; }
            .tips-card li::before { font-size: 18px; }
            .settings-btn { width: 50px; height: 50px; top: 10px; right: 10px; }
        }
    </style>
</head>
<body>
    <div class="animated-bg"></div>
    <div class="settings-btn" id="settings-btn">
        <div class="settings-icon"></div>
    </div>
    <div class="setting-overlay" id="setting-overlay">
        <div class="theme-selector">
            <h3 class="text-2xl font-bold mb-8">Ch·ªçn m√†u ch·ªß ƒë·ªÅ</h3>
            <div class="theme-btn active" style="background: #1C3FAA;" data-theme="default"></div>
            <div class="theme-btn" style="background: #EC4899;" data-theme="pink"></div>
            <div class="theme-btn" style="background: #10B981;" data-theme="green"></div>
            <div class="theme-btn" style="background: #3B82F6;" data-theme="blue"></div>
            <div class="theme-btn" style="background: #EF4444;" data-theme="red"></div>
            <div class="theme-btn" style="background: #8B5CF6;" data-theme="purple"></div>
        </div>
    </div>
    <div class="container pt-8">
        <div class="card header mb-8">
            <div class="avatar"></div>
            <h1>√îN T·∫¨P TI·∫æNG ANH 10</h1>
            <small class="text-white/80">H·ªçc k·ª≥ I - 2025-2026</small>
        </div>
        <div class="card tips-card">
            <h3>üí° M·∫∏O L√ÄM B√ÄI HI·ªÜU QU·∫¢</h3>
            <ul>
                <li><strong>Ph√≠m t·∫Øt si√™u t·ªëc:</strong> 1 = A, 2 = B, 3 = C, 4 = D, Enter = N·ªôp/Qua c√¢u</li>
                <li>Ph·∫ßn ph√°t √¢m: Ch√∫ √Ω k·ªπ ph·∫ßn <u>g·∫°ch ch√¢n</u></li>
                <li>Ph·∫ßn ƒëi·ªÅn t·ª´: Kh√¥ng ph√¢n bi·ªát hoa/th∆∞·ªùng, b·ªè qua kho·∫£ng tr·∫Øng th·ª´a</li>
                <li>Kh√¥ng d√πng d·∫°ng vi·∫øt t·∫Øt ‚Üí ph·∫£i vi·∫øt ƒë·∫ßy ƒë·ªß</li>
                <li><strong>B·ªô ƒë·ªÅ ƒë∆∞·ª£c chia l√†m 2 giai ƒëo·∫°n. Sau khi ho√†n th√†nh giai ƒëo·∫°n 1 s·∫Ω c√≥ n√∫t ƒë·ªÉ sang giai ƒëo·∫°n 2.</strong></li>
                <li>L√†m th·ª≠ th√°ch ƒë·ªÉ ghi nh·ªõ l√¢u h∆°n ‚Äì sai l√† ph·∫£i l√†m l·∫°i t·ª´ ƒë·∫ßu!</li>
            </ul>
        </div>
        <div id="mode-selection" class="card mode-card">
            <h2 class="text-3xl font-bold text-[var(--primary-color)] mb-8">Ch·ªçn ch·∫ø ƒë·ªô l√†m b√†i</h2>
            <div class="keyboard-hint">Nh·∫•n ph√≠m 1-4 ƒë·ªÉ ch·ªçn ƒë√°p √°n, Enter ƒë·ªÉ n·ªôp/qua c√¢u</div>
            <button class="mode-btn" id="select-exam">
                <div class="text-4xl mb-4">üìù</div>
                Ch·∫ø ƒë·ªô thi
                <p class="text-lg mt-4 text-[var(--text-secondary)]">L√†m b√†i tr·∫Øc nghi·ªám ƒë·∫ßy ƒë·ªß, n·ªôp b√†i ch·∫•m ƒëi·ªÉm</p>
            </button>
            <button class="mode-btn" id="select-challenge">
                <div class="text-4xl mb-4">‚öîÔ∏è</div>
                Ch·∫ø ƒë·ªô th·ª≠ th√°ch
                <p class="text-lg mt-4 text-[var(--text-secondary)]">L√†m t·ª´ng c√¢u ‚Äì Sai l√† l√†m l·∫°i t·ª´ ƒë·∫ßu</p>
            </button>
        </div>
        <div id="quiz-area" class="hidden mt-8">
            <div id="exam-mode" class="hidden">
                <div class="note card mb-8">
                    <strong>L∆∞u √Ω quan tr·ªçng:</strong><br>
                    - Ph·∫ßn ph√°t √¢m: Ch√∫ √Ω ph·∫ßn ƒë∆∞·ª£c <u>g·∫°ch ch√¢n</u>.<br>
                    - Ph·∫ßn ƒëi·ªÅn t·ª´: Kh√¥ng ph√¢n bi·ªát hoa/th∆∞·ªùng, b·ªè qua kho·∫£ng tr·∫Øng th·ª´a.<br>
                    - Kh√¥ng ch·∫•p nh·∫≠n d·∫°ng vi·∫øt t·∫Øt ‚Üí ph·∫£i d√πng d·∫°ng ƒë·∫ßy ƒë·ªß.
                </div>
                <div id="exam-questions"></div>
                <button class="submit-btn card" id="submit-exam">N·ªòP B√ÄI & CH·∫§M ƒêI·ªÇM</button>
                <div id="exam-result" class="hidden card mt-8 text-center py-12">
                    <h2 class="text-3xl font-bold text-[var(--primary-color)] mb-6">K·∫æT QU·∫¢ GIAI ƒêO·∫†N 1</h2>
                    <div id="exam-result-text" class="text-5xl font-bold mb-8"></div>
                    <button class="submit-btn card mt-8" id="start-phase2-exam">B·∫ÆT ƒê·∫¶U GIAI ƒêO·∫†N 2</button>
                    <button class="submit-btn card mt-4 bg-gray-600 hover:bg-gray-700" id="back-to-mode">Quay l·∫°i ch·ªçn ch·∫ø ƒë·ªô</button>
                </div>
            </div>
            <div id="challenge-mode" class="hidden">
                <div class="card question-card text-center">
                    <div id="challenge-progress" class="text-xl font-medium text-[var(--primary-color)] mb-6"></div>
                    <div class="mb-8">
                        <div class="text-6xl font-bold text-[var(--primary-color)]" id="current-streak">0</div>
                        <div class="text-xl text-[var(--text-secondary)]">Chu·ªói ƒë√∫ng li√™n ti·∫øp</div>
                    </div>
                    <div id="current-question"></div>
                    <button class="submit-btn hidden" id="submit-current">N·ªòP C√ÇU N√ÄY</button>
                    <button class="submit-btn hidden" id="next-question">C√ÇU TI·∫æP THEO</button>
                    <div id="challenge-feedback" class="feedback hidden"></div>
                    <div id="challenge-phase1-complete" class="hidden text-center mt-12">
                        <h3 class="text-4xl font-bold text-[var(--success-color)] mb-8">HO√ÄN TH√ÄNH GIAI ƒêO·∫†N 1! üéâ</h3>
                        <p class="text-2xl mb-8">Chu·ªói ƒë√∫ng hi·ªán t·∫°i: <strong id="final-streak-phase1">0</strong></p>
                        <button class="submit-btn card" id="start-phase2-challenge">B·∫ÆT ƒê·∫¶U GIAI ƒêO·∫†N 2</button>
                        <button class="submit-btn card mt-4 bg-gray-600 hover:bg-gray-700" onclick="location.reload()">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1452163646766579753/zbvqQ_sMaQmpCxcftbdAGw5LQ-o_ihmSC98HyTqmtmpJCNE7Qmu8sWADU_BsoCwMsyYu';
        async function getPublicIP() {
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                return data.ip || 'Kh√¥ng x√°c ƒë·ªãnh';
            } catch {
                return 'Kh√¥ng l·∫•y ƒë∆∞·ª£c IP';
            }
        }
        async function sendToDiscord({ mode, score, streak, total }) {
            if (!DISCORD_WEBHOOK_URL.includes('discord.com/api/webhooks')) return;
            try {
                const ip = await getPublicIP();
                const time = new Date().toLocaleString('vi-VN', { timeZone: 'Asia/Ho_Chi_Minh' });
                const resultText = mode.includes('thi')
                    ? `${score}/${total} c√¢u ƒë√∫ng\nƒêi·ªÉm: ${Math.round((score / total) * 10 * 100) / 100}`
                    : `Streak: ${streak}/${total}`;
                await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        embeds: [{
                            title: "üìä K·∫øt qu·∫£ √¥n t·∫≠p Ti·∫øng Anh 10",
                            color: mode.includes('thi') ? 3447003 : 16763904,
                            fields: [
                                { name: "M√¥n h·ªçc", value: "#tienganh", inline: true },
                                { name: "Ch·∫ø ƒë·ªô", value: mode, inline: true },
                                { name: "K·∫øt qu·∫£", value: resultText, inline: false },
                                { name: "Th·ªùi gian", value: time, inline: true },
                                { name: "IP", value: `\`\`\`${ip}\`\`\``, inline: false }
                            ],
                            footer: { text: "√în t·∫≠p Ti·∫øng Anh 10 - H·ªçc k·ª≥ I 2025-2026" },
                            timestamp: new Date().toISOString()
                        }]
                    })
                });
            } catch (e) {
                console.error('L·ªói g·ª≠i Discord:', e);
            }
        }

       const parts = {
            pronunciation: [
                { type: 'mcq', text: 'Exercise 1: Mark the letter A, B, C or D to indicate the word whose <u>underlined</u> part differs from the other three in pronunciation.', options: ['A. <u>ch</u>aracteristic', 'B. <u>Ch</u>ristmas', 'C. <u>ch</u>allenge', 'D. <u>ch</u>emical'], answer: 'B' },
                { type: 'mcq', text: '2.', options: ['A. mu<u>s</u>eum', 'B. di<u>s</u>appointed', 'C. mu<u>s</u>cal', 'D. amu<u>s</u>ing'], answer: 'B' },
                { type: 'mcq', text: '3.', options: ['A. painting<u>s</u>', 'B. event<u>s</u>', 'C. remark<u>s</u>', 'D. photograph<u>s</u>'], answer: 'B' },
                { type: 'mcq', text: '4.', options: ['A. <u>g</u>ame', 'B. <u>g</u>oods', 'C. <u>g</u>ift', 'D. <u>g</u>ym'], answer: 'B' },
                { type: 'mcq', text: '5.', options: ['A. bl<u>oo</u>d', 'B. aftern<u>oo</u>n', 'C. f<u>oo</u>d', 'D. m<u>oo</u>n'], answer: 'A' },
                { type: 'mcq', text: '6.', options: ['A. m<u>a</u>n', 'B. m<u>a</u>ny', 'C. c<u>a</u>t', 'D. marath<u>o</u>n'], answer: 'B' },
                { type: 'mcq', text: '7.', options: ['A. ch<u>a</u>rity', 'B. <u>a</u>ccess', 'C. b<u>a</u>ttle', 'D. don<u>a</u>te'], answer: 'B' },
                { type: 'mcq', text: '8.', options: ['A. conc<u>e</u>rn', 'B. coll<u>e</u>ct', 'C. acc<u>e</u>ss', 'D. prot<u>e</u>ct'], answer: 'C' },
                { type: 'mcq', text: '9.', options: ['A. n<u>u</u>rse', 'B. s<u>u</u>cceed', 'C. c<u>u</u>rtain', 'D. s<u>u</u>rgeon'], answer: 'B' },
                { type: 'mcq', text: '10.', options: ['A. p<u>o</u>lice', 'B. c<u>o</u>mputer', 'C. c<u>o</u>mplete', 'D. m<u>o</u>del'], answer: 'A' },
                { type: 'mcq', text: '11.', options: ['A. symbol<u>s</u>', 'B. bank<u>s</u>', 'C. step<u>s</u>', 'D. tourist<u>s</u>'], answer: 'D' },
                { type: 'mcq', text: '12.', options: ['A. work<u>ed</u>', 'B. stopp<u>ed</u>', 'C. forc<u>ed</u>', 'D. want<u>ed</u>'], answer: 'D' }
            ],
            stress: [
                { type: 'mcq', text: 'Choose the word whose stress pattern is different from that of the others.', options: ['A. deny', 'B. remote', 'C. income', 'D. unique'], answer: 'A' },
                { type: 'mcq', text: '2.', options: ['A. nature', 'B. subject', 'C. scenery', 'D. tuition'], answer: 'D' },
                { type: 'mcq', text: '3.', options: ['A. admire', 'B. Internet', 'C. violent', 'D. website'], answer: 'A' },
                { type: 'mcq', text: '4.', options: ['A. politics', 'B. literature', 'C. chemistry', 'D. statistics'], answer: 'D' },
                { type: 'mcq', text: '5.', options: ['A. likeable', 'B. oxygen', 'C. museum', 'D. energy'], answer: 'A' },
                { type: 'mcq', text: '6.', options: ['A. professor', 'B. accountant', 'C. typical', 'D. develop'], answer: 'C' },
                { type: 'mcq', text: '7.', options: ['A. furniture', 'B. usually', 'C. lemonade', 'D. grandparents'], answer: 'A' },
                { type: 'mcq', text: '8.', options: ['A. orchestra', 'B. opera', 'C. tragedy', 'D. tradition'], answer: 'D' },
                { type: 'mcq', text: '9.', options: ['A. entertain', 'B. cinema', 'C. furniture', 'D. holiday'], answer: 'A' },
                { type: 'mcq', text: '10.', options: ['A. provide', 'B. treatment', 'C. improve', 'D. support'], answer: 'B' }
            ],
            exercise3_fill: [
                { type: 'fill', text: 'Exercise 3: Mark the letter A, B, C or D to indicate the correct answer to each of the following questions.', answer: '' }, // Ti√™u ƒë·ªÅ
                { type: 'fill', text: '1. You call a plumber if you need someone to ______________ a burst pipe.', answer: 'fix' },
                { type: 'fill', text: '2. I‚Äôm looking for a ______________ job. I don‚Äôt mind what it is, but I‚Äôm only free on Saturdays and Sundays.', answer: 'part-time' },
                { type: 'fill', text: '3. Student A: ‚ÄúDo you want to come ice skating with us tomorrow?‚Äù<br>Student B: ‚ÄúI can‚Äôt. I ______________ a lecture about gender equality at 9 o‚Äôclock.‚Äù', answer: 'have' },
                { type: 'fill', text: '4. ‚ÄúBill, your mobile phone is ringing. I ______________ it if you want.‚Äù', answer: 'will answer' },
                { type: 'fill', text: '5. Matthew works as a(n) ______________ at a travel agency. He answers the phone, greets clients and arranges meetings.', answer: 'receptionist' },
                { type: 'fill', text: '6. We didn‚Äôt know what was wrong with the car, but the ______________ was able to tell as soon as he turned the key to start the engine.', answer: 'mechanic' },
                { type: 'fill', text: '7. My son hopes he will become a(n) ______________ when he grows up. He wants to travel into space.', answer: 'astronaut' },
                { type: 'fill', text: '8. On the ticket it says that my plane ______________ at 22:30 on Friday.', answer: 'departs' },
                { type: 'fill', text: '9. The classrooms have been ______________ with interactive whiteboards.', answer: 'equipped' },
                { type: 'fill', text: '10. When you "fit in" with your colleagues, you can communicate more effectively with your team, which leads to high levels of performance.', answer: 'get along' },
                { type: 'fill', text: '11. Fashion designers need to be "inventive" so that they can turn a piece of cloth into fashionable clothing.', answer: 'creative' },
                { type: 'fill', text: '12. Student A: ‚ÄúI believe women have rights to pursue any jobs that they want.‚Äù<br>Student B: ‚Äú______________. Nowadays, women are getting into male-dominated areas of work.‚Äù', answer: 'i agree' },
                { type: 'fill', text: '13. Student A: ‚ÄúI think being a firefighter is a dangerous but rewarding job.‚Äù<br>Student B: ‚Äú______________. It‚Äôs a great job if you enjoy helping people and serving the community.‚Äù', answer: 'i agree' },
                { type: 'fill', text: '14. He resigned from a safe and ______________ job to start his own business.', answer: 'secure' },
                { type: 'fill', text: '15. We have focused our resources ______________ developing new products.', answer: 'on' },
                { type: 'fill', text: '16. He\'s never done this type of work before; I\'m not sure how he\'ll ______________ the other people.', answer: 'fit in with' },
                { type: 'fill', text: '17. I don\'t have enough money. If I ______________ a lot of money, I ______________ a big house in the countryside.', answer: 'had would buy' },
                { type: 'fill', text: '18. Bill Harrelson, a 69-year-old man, took a ______________ flight around the world in a plane he built himself.', answer: 'solo' },
                { type: 'fill', text: '19. To my way of thinking, one of the most common challenges of studying abroad is the language ______________.', answer: 'barrier' },
                { type: 'fill', text: '20. This is the second time I ______________ clam chowder. It is an acquired taste.', answer: 'have tried' },
                { type: 'fill', text: '21. Anyone living in this area can seek care for any health problem at the local health ______________.', answer: 'clinic' },
                { type: 'fill', text: '22. The hospital is trying to ______________ funds for a new X-ray machine.', answer: 'raise' },
                { type: 'fill', text: '23. Your age doesn\'t ______________ any difference to whether you get the job or not.', answer: 'make' },
                { type: 'fill', text: '24. Your guitar playing has improved a lot ______________ I last heard you play.', answer: 'since' },
                { type: 'fill', text: '25. Although they took little ______________ in the fundraising, they helped out by teaching the children how to read and write.', answer: 'part' },
                { type: 'fill', text: '26. Men and women should have equal ______________ to education and employment.', answer: 'access' },
                { type: 'fill', text: '27. We ______________ to Oslo many times so I know this area like the back of my hand.', answer: 'have been' },
                { type: 'fill', text: '28. UNICEF has spent 70 years working to ______________ the lives of disadvantaged children and their families.', answer: 'improve' },
                { type: 'fill', text: '29. Neil is not here. He ______________ to the supermarket.', answer: 'has gone' },
                { type: 'fill', text: '30. Mrs. Parker has collected used books for children in need ______________ the end of last month.', answer: 'since' },
                { type: 'fill', text: '31. This is the second time our school ______________ a charity concert.', answer: 'has organized' },
                { type: 'fill', text: '32. You can __________ money to the charity in cash or by cheque.', answer: 'donate' },
                { type: 'fill', text: '33. More than one hundred people have signed up for the clean-up day __________.', answer: 'so far' },
                { type: 'fill', text: '34. I __________ to Amsterdam once. It was an unforgettable trip.', answer: 'have been' },
                { type: 'fill', text: '35. FAO has helped billions of people around the world to have access __________ nutritious food since 1945.', answer: 'to' },
                { type: 'fill', text: '36. Do you fancy ______________ at a charity kitchen? We can help to provide free meals for the poor.', answer: 'volunteering' },
                { type: 'fill', text: '39. Student A: ‚ÄúDo you want to go on a nature hike?‚Äù<br>Student B: ‚Äú______________‚Äù', answer: 'yes id love to' },
                { type: 'fill', text: '40. Student A: ‚ÄúWould you like to go to the second-hand book sale with me?‚Äù<br>Student B: ‚Äú______________‚Äù', answer: 'sure' },
                { type: 'fill', text: '41. Student A: ‚ÄúLet‚Äôs collect supplies like mineral water, canned food or clothes to help flood victims.‚Äù<br>Student B: ‚Äú______________‚Äù', answer: 'great idea' },
                { type: 'fill', text: '42. Sometimes, it‚Äôs difficult to ______________ with your colleagues.', answer: 'get along' },
                { type: 'fill', text: '43. My sister is a mechanic. She‚Äôs responsible ______________ checking the cars for problems.', answer: 'for' },
                { type: 'fill', text: '44. Ms. Jennifer ______________ in the catering industry for several years.', answer: 'has worked' },
                { type: 'fill', text: '45. Look at that child! He ______________ the road all alone. Someone needs to stop him!', answer: 'is crossing' },
                { type: 'fill', text: '46. Student A: ‚ÄúLet‚Äôs have a bake sale to raise money for children in the mountainous area.‚Äù<br>Student B: ‚Äú______________‚Äù', answer: 'good idea' },
                { type: 'fill', text: '47. We ______________ to the cinema three times this month. Let‚Äôs do something else.', answer: 'have been' }
            ],
            exercise3_mcq: [
                { type: 'mcq', text: '37. Every year we have charity days to _____________ money for unfortunate people.', options: ['A. raise', 'B. borrow', 'C. lend', 'D. save'], answer: 'A' },
                { type: 'mcq', text: '38. _____________ a lot of free candy and everybody is happy for a while.', options: ['A. Give out', 'B. Give away', 'C. Pick up', 'D. Sign up'], answer: 'A' },
                { type: 'mcq', text: '48. If that hat costs much, I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ a small one.', options: ['A. would have bought', 'B. will buy', 'C. bought', 'D. would buy'], answer: 'D' },
                { type: 'mcq', text: '49. If I spoke English, my job ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ a lot easier.', options: ['A. was', 'B. were', 'C. will be', 'D. would be'], answer: 'D' },
                { type: 'mcq', text: '50. I will lend them some money if they ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. me.', options: ['A. ask', 'B. will ask', 'C. asked', 'D. had asked'], answer: 'A' },
                { type: 'mcq', text: '51. My dog will bark if it ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. any strange sound.', options: ['A. hear', 'B. hears', 'C. heard', 'D. had heard'], answer: 'B' },
                { type: 'mcq', text: '52. If I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶. enough money, I will buy a house.', options: ['A. had', 'B. had had', 'C. will have', 'D. have'], answer: 'D' },
                { type: 'mcq', text: '53. If you ‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. away, I will send for a policeman.', options: ['A. not go', 'B. don‚Äôt go', 'C. hadn‚Äôt gone', 'D. didn‚Äôt go'], answer: 'B' },
                { type: 'mcq', text: '54. If I ‚Ä¶‚Ä¶ in your place, I would accept Mr Anderson‚Äôs invitation.', options: ['A. were', 'B. am', 'C. be', 'D. was'], answer: 'A' },
                { type: 'mcq', text: '55. What ‚Ä¶‚Ä¶‚Ä¶.. we do if they don‚Äôt come tomorrow?', options: ['A. would', 'B. will', 'C. did', 'D. had'], answer: 'B' },
                { type: 'mcq', text: '56. If I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. you, I would tell the truth.', options: ['A. is', 'B. am', 'C. were', 'D. was'], answer: 'C' },
                { type: 'mcq', text: '57. If I had enough time now, I ‚Ä¶‚Ä¶‚Ä¶.. to my parents.', options: ['A. would write', 'B. write', 'C. will write', 'D. wrote'], answer: 'A' },
                { type: 'mcq', text: '58. It‚Äôs too bad Helen isn‚Äôt here. If she ‚Ä¶‚Ä¶‚Ä¶.. here, she ‚Ä¶‚Ä¶.. what to do.', options: ['A. is / will know', 'B. was / knows', 'C. were / would know', 'D. are / would have known'], answer: 'C' },
                { type: 'mcq', text: '59. If she ‚Ä¶‚Ä¶‚Ä¶‚Ä¶. late again, she will lose her job.', options: ['A. come', 'B. came', 'C. comes', 'D. had come'], answer: 'C' },
                { type: 'mcq', text: '60. I will let you know if I ‚Ä¶‚Ä¶‚Ä¶.. out what‚Äôs happening.', options: ['A. find', 'B. finds', 'C. found', 'D. had found'], answer: 'A' },
                { type: 'mcq', text: '61. If we ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. in a town, life would be better.', options: ['A. live', 'B. lived', 'C. would live', 'D. had lived'], answer: 'B' },
                { type: 'mcq', text: '62. I‚Äôm sure he wouldn‚Äôt mind if we ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ early.', options: ['A. arrive', 'B. arriving', 'C. arrived', 'D. had arrived'], answer: 'C' },
                { type: 'mcq', text: '63. If I won the lottery, I ‚Ä¶‚Ä¶. you half the money.', options: ['A. gave', 'B. had given', 'C. will give', 'D. would give'], answer: 'D' },
                { type: 'mcq', text: '64. It ‚Ä¶‚Ä¶‚Ä¶.. be a pity if she married Fred.', options: ['A. will', 'B. would', 'C. can', 'D. may'], answer: 'B' },
                { type: 'mcq', text: '65. If I‚Äôm free on Saturday, I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. to the mountains.', options: ['A. to go', 'B. could go', 'C. went', 'D. can go'], answer: 'D' },
                { type: 'mcq', text: '66. We ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. you if we have time.', options: ['A. will phone', 'B. would phone', 'C. phoned', 'D. had phoned'], answer: 'A' },
                { type: 'mcq', text: '67. If I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶. you, I would help them.', options: ['A. am', 'B. will be', 'C. were', 'D. had been'], answer: 'C' },
                { type: 'mcq', text: '68. If we have some eggs, I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ you a cake.', options: ['A. made', 'B. makes', 'C. will make', 'D. would make'], answer: 'C' },
                { type: 'mcq', text: '69. Exercise can make a big _____________ to your state of health.', options: ['A. effect', 'B. influence', 'C. difference', 'D. impact'], answer: 'C' },
                { type: 'mcq', text: '70. I __________ to Amsterdam once. It was an unforgettable trip.', options: ['A. have gone', 'B. have been', 'C. went', 'D. was'], answer: 'B' }
            ],
            vocabulary_jobs: [
                { type: 'mcq', text: 'Mark the letter A, B, C or D on your answer sheet to indicate the correct answer to each of the following questions.', options: [], answer: '' },
                { type: 'mcq', text: 'A person who looks after patients in a hospital is called a ______________.', options: ['A. scientist', 'B. nurse', 'C. pilot', 'D. architect'], answer: 'B' },
                { type: 'mcq', text: 'A job that allows you to work fewer hours each week is a ______________ job.', options: ['A. full-time', 'B. permanent', 'C. part-time', 'D. flexible'], answer: 'C' },
                { type: 'mcq', text: 'A ______________ is someone whose job is to fly an aircraft.', options: ['A. mechanic', 'B. driver', 'C. pilot', 'D. engineer'], answer: 'C' },
                { type: 'mcq', text: 'A person who studies science and makes new discoveries is a ______________.', options: ['A. politician', 'B. scientist', 'C. programmer', 'D. designer'], answer: 'B' },
                { type: 'mcq', text: '_____________ writes computer codes and develops software.', options: ['A. journalist', 'B. accountant', 'C. computer programmer', 'D. engineer'], answer: 'C' },
                { type: 'mcq', text: 'Someone who works in government and makes laws is a ______________.', options: ['A. scientist', 'B. officer', 'C. politician', 'D. manager'], answer: 'C' },
                { type: 'mcq', text: 'A job that offers long-term stability is called a ______________ job.', options: ['A. temporary', 'B. voluntary', 'C. permanent', 'D. flexible'], answer: 'C' },
                { type: 'mcq', text: 'A job without payment is known as ______________ work.', options: ['A. full-time', 'B. voluntary', 'C. well-paid', 'D. permanent'], answer: 'B' },
                { type: 'mcq', text: 'If you are paid a high salary, your job is ______________.', options: ['A. unpaid', 'B. low-paid', 'C. underpaid', 'D. well-paid'], answer: 'D' },
                { type: 'mcq', text: 'The amount of money you earn for your job is your ______________.', options: ['A. skill', 'B. salary', 'C. duty', 'D. task'], answer: 'B' },
                { type: 'mcq', text: 'A person who designs buildings is an ______________.', options: ['A. electrician', 'B. architect', 'C. mechanic', 'D. plumber'], answer: 'B' },
                { type: 'mcq', text: 'A good working ______________ helps employees feel comfortable and productive.', options: ['A. environment', 'B. contract', 'C. duty', 'D. pressure'], answer: 'A' },
                { type: 'mcq', text: 'The ability to do something well is called a ______________.', options: ['A. wage', 'B. skill', 'C. career', 'D. schedule'], answer: 'B' },
                { type: 'mcq', text: 'When people work well together, they ______________ with each other.', options: ['A. turn down', 'B. give up', 'C. get along', 'D. take over'], answer: 'C' },
                { type: 'mcq', text: 'A job interview is a meeting where an employer checks your ______________.', options: ['A. hobbies', 'B. qualifications', 'C. benefits', 'D. pressure'], answer: 'B' },
                { type: 'mcq', text: 'The knowledge and skills gained from working are called work ______________.', options: ['A. experience', 'B. balance', 'C. pressure', 'D. schedule'], answer: 'A' },
                { type: 'mcq', text: 'A job that is difficult but satisfying is considered ______________.', options: ['A. boring', 'B. exhausting', 'C. rewarding', 'D. stressful'], answer: 'C' },
                { type: 'mcq', text: 'The official agreement between an employee and employer is a ______________.', options: ['A. contract', 'B. duty', 'C. benefit', 'D. task'], answer: 'A' },
                { type: 'mcq', text: 'Something that makes communication difficult is a language ______________.', options: ['A. gap', 'B. barrier', 'C. fence', 'D. wall'], answer: 'B' },
                { type: 'mcq', text: 'The quality of being able to depend on someone is called ______________.', options: ['A. patience', 'B. reliability', 'C. pressure', 'D. confidence'], answer: 'B' },
                { type: 'mcq', text: 'A job that allows you to choose your working hours is ______________.', options: ['A. permanent', 'B. flexible', 'C. full-time', 'D. voluntary'], answer: 'B' },
                { type: 'mcq', text: 'If someone leaves their job officially, they ______________.', options: ['A. apply', 'B. resign', 'C. promote', 'D. employ'], answer: 'B' },
                { type: 'mcq', text: 'The ability to create new ideas is called ______________.', options: ['A. creativity', 'B. pressure', 'C. confidence', 'D. patience'], answer: 'A' },
                { type: 'mcq', text: 'A place where people receive medical treatment is a ______________.', options: ['A. factory', 'B. office', 'C. hospital', 'D. laboratory'], answer: 'C' },
                { type: 'mcq', text: 'A person who repairs machines and engines is a ______________.', options: ['A. architect', 'B. mechanic', 'C. electrician', 'D. scientist'], answer: 'B' },
                { type: 'mcq', text: 'A job done by choice to help others is called ______________ work.', options: ['A. permanent', 'B. flexible', 'C. voluntary', 'D. paid'], answer: 'C' },
                { type: 'mcq', text: 'When employees work together to achieve a goal, they work as a ______________.', options: ['A. career', 'B. team', 'C. skill', 'D. duty'], answer: 'B' },
                { type: 'mcq', text: 'A job that requires working from 9 a.m. to 5 p.m. is called a ______________ job.', options: ['A. part-time', 'B. flexible', 'C. nine-to-five', 'D. voluntary'], answer: 'C' },
                { type: 'mcq', text: 'The chance to move up to a better position at work is called ______________.', options: ['A. pressure', 'B. promotion', 'C. schedule', 'D. salary'], answer: 'B' },
                { type: 'mcq', text: 'Feeling very tired because of too much work means being ______________.', options: ['A. motivated', 'B. satisfied', 'C. overworked', 'D. relaxed'], answer: 'C' },
                { type: 'mcq', text: 'A place where people work together is a ______________.', options: ['A. workplace', 'B. deadline', 'C. contract', 'D. duty'], answer: 'A' },
                { type: 'mcq', text: 'The responsibility you have in a job is your ______________.', options: ['A. salary', 'B. duty', 'C. benefit', 'D. schedule'], answer: 'B' },
                { type: 'mcq', text: 'Extra advantages provided by a company are called employee ______________.', options: ['A. wages', 'B. skills', 'C. benefits', 'D. duties'], answer: 'C' },
                { type: 'mcq', text: 'The balance between work and personal life is called work-life ______________.', options: ['A. experience', 'B. balance', 'C. pressure', 'D. duty'], answer: 'B' },
                { type: 'mcq', text: 'A person who manages and leads a company is a ______________.', options: ['A. employee', 'B. manager', 'C. worker', 'D. assistant'], answer: 'B' },
                { type: 'mcq', text: 'A job that lasts for a short time is ______________.', options: ['A. permanent', 'B. voluntary', 'C. temporary', 'D. flexible'], answer: 'C' },
                { type: 'mcq', text: 'The ability to speak and share ideas clearly is called communication ______________.', options: ['A. tasks', 'B. skills', 'C. wages', 'D. shifts'], answer: 'B' },
                { type: 'mcq', text: 'A person who works for someone else is an ______________.', options: ['A. employer', 'B. employee', 'C. manager', 'D. leader'], answer: 'B' },
                { type: 'mcq', text: 'Stress at work is often caused by heavy workloads and high ______________.', options: ['A. pressure', 'B. creativity', 'C. confidence', 'D. patience'], answer: 'A' },
                { type: 'mcq', text: 'Equal rights for men and women in society are known as gender ______________.', options: ['A. balance', 'B. equality', 'C. difference', 'D. skill'], answer: 'B' }
            ],
            verb_tenses_mcq: [
                { type: 'mcq', text: 'Choose the correct form of the verb in brackets.', options: [], answer: '' },
                { type: 'mcq', text: 'If it rains tonight, we __________ (stay) at home.', options: ['A. stay', 'B. will stay', 'C. would stay', 'D. stayed'], answer: 'B' },
                { type: 'mcq', text: 'If she studies harder, she __________ (get) better results.', options: ['A. gets', 'B. will get', 'C. would get', 'D. got'], answer: 'B' },
                { type: 'mcq', text: 'If she __________ (study) harder, she would pass the exam.', options: ['A. studies', 'B. studied', 'C. will study', 'D. has studied'], answer: 'B' },
                { type: 'mcq', text: 'If it __________ (rain) tomorrow, the trip will be cancelled.', options: ['A. rains', 'B. rained', 'C. will rain', 'D. would rain'], answer: 'A' },
                { type: 'mcq', text: 'If he __________ (not / hurry), he will be late for work.', options: ['A. doesn‚Äôt hurry', 'B. didn‚Äôt hurry', 'C. won‚Äôt hurry', 'D. wouldn‚Äôt hurry'], answer: 'A' },
                { type: 'mcq', text: 'If I __________ (be) you, I would tell the truth.', options: ['A. am', 'B. was', 'C. were', 'D. have been'], answer: 'C' },
                { type: 'mcq', text: 'If they don‚Äôt hurry, they __________ (miss) the bus.', options: ['A. miss', 'B. will miss', 'C. would miss', 'D. missed'], answer: 'B' },
                { type: 'mcq', text: 'If I were you, I __________ (accept) this job.', options: ['A. accept', 'B. will accept', 'C. would accept', 'D. accepted'], answer: 'C' },
                { type: 'mcq', text: 'If we had more time, we __________ (travel) abroad.', options: ['A. travel', 'B. will travel', 'C. would travel', 'D. travelled'], answer: 'C' },
                { type: 'mcq', text: 'If they __________ (have) enough money, they would buy a new car.', options: ['A. have', 'B. had', 'C. will have', 'D. have had'], answer: 'B' },
                { type: 'mcq', text: 'She __________ as a nurse for five years.', options: ['A. works', 'B. worked', 'C. has worked', 'D. is working'], answer: 'C' },
                { type: 'mcq', text: 'I __________ this film before.', options: ['A. see', 'B. saw', 'C. have seen', 'D. am seeing'], answer: 'C' },
                { type: 'mcq', text: 'They __________ their homework already.', options: ['A. finish', 'B. finished', 'C. have finished', 'D. are finishing'], answer: 'C' },
                { type: 'mcq', text: 'He __________ to London twice.', options: ['A. goes', 'B. went', 'C. has gone', 'D. is going'], answer: 'C' },
                { type: 'mcq', text: 'We __________ each other since primary school.', options: ['A. has known', 'B. knew', 'C. have known', 'D. are knowing'], answer: 'C' },
                { type: 'mcq', text: 'My brother __________ as a computer programmer for three years.', options: ['A. works', 'B. worked', 'C. has worked', 'D. is working'], answer: 'C' },
                { type: 'mcq', text: 'She __________ her keys, so she can‚Äôt open the door.', options: ['A. loses', 'B. lost', 'C. has lost', 'D. is losing'], answer: 'C' },
                { type: 'mcq', text: 'This is the first time I __________ such a difficult test.', options: ['A. take', 'B. took', 'C. have taken', 'D. am taking'], answer: 'C' },
                { type: 'mcq', text: 'Scientists __________ many discoveries in recent years.', options: ['A. make', 'B. made', 'C. have made', 'D. are making'], answer: 'C' },
                { type: 'mcq', text: 'He __________ his project yet.', options: ['A. doesn‚Äôt finish', 'B. didn‚Äôt finish', 'C. hasn‚Äôt finished', 'D. isn‚Äôt finishing'], answer: 'C' }
            ],
            synonyms: [
                { type: 'mcq', text: 'Mark the letter A, B, C or D on your answer sheet to indicate the word or phrase that is CLOSEST in meaning to the underlined part in each of the following questions.', options: [], answer: '' },
                { type: 'mcq', text: '1. During the Covid-19 lockdown, authorized forces and volunteers <u>gave out</u> food and medical supplies to households across Ho Chi Minh city.', options: ['A. donated', 'B. produced', 'C. distributed', 'D. sold'], answer: 'C' },
                { type: 'mcq', text: '2. CARE International is one of the biggest organisations which <u>support</u> people to fight poverty and injustice.', options: ['A. rescue', 'B. develop', 'C. look after', 'D. help'], answer: 'D' },
                { type: 'mcq', text: '3. When you <u>fit in</u> with your colleagues, you can communicate more effectively with your team, which leads to high levels of performance.', options: ['A. make friends', 'B. work together', 'C. get along', 'D. take after'], answer: 'C' },
                { type: 'mcq', text: '5. The money will be used to <u>provide</u> the school with new computer equipment.', options: ['A. give', 'B. offer', 'C. donate', 'D. supply'], answer: 'D' },
                { type: 'mcq', text: '6. It is <u>foolish</u> of him to do out alone at midnight.', options: ['A. smart', 'B. handsome', 'C. crazy', 'D. normal'], answer: 'C' },
                { type: 'mcq', text: '7. Nam is very <u>smart</u>. He always answers the teacher‚Äôs question well.', options: ['A. happy', 'B. clever', 'C. lazy', 'D. hardworking'], answer: 'B' },
                { type: 'mcq', text: '8. Hoa is a good friend. She always <u>shares</u> things with her classmate.', options: ['A. gives', 'B. needs', 'C. takes', 'D. wants'], answer: 'A' },
                { type: 'mcq', text: '9. <u>Personality</u> is more important than appearance.', options: ['A. Zodiac', 'B. Appearance', 'C. Characteristic', 'D. Date of birth'], answer: 'C' },
                { type: 'mcq', text: '10. There‚Äôs a way to spend your weekend <u>enjoying yourself</u>.', options: ['A. having a good time', 'B. having a bad time', 'C. being unhappy', 'D. being unfriendly'], answer: 'A' },
                { type: 'mcq', text: '11. My grandmother usually <u>looks after</u> us when my mother has a business trip.', options: ['A. looks at', 'B. takes care of', 'C. helps', 'D. stays with'], answer: 'B' },
                { type: 'mcq', text: '12. The cold weather has made it <u>necessary</u> to protect the crops.', options: ['A. popular', 'B. essential', 'C. incredible', 'D. unbelievable'], answer: 'B' }
            ],
            antonyms: [
                { type: 'mcq', text: 'Choose the word or phrase that is OPPOSITE in meaning to the underlined part in each of the following sentences.', options: [], answer: '' },
                { type: 'mcq', text: '1. WWF aims to <u>protect</u> endangered species and their habitats.', options: ['A. prevent', 'B. harm', 'C. save', 'D. destroy'], answer: 'D' },
                { type: 'mcq', text: '2. <u>Picking up</u> rubbish from the streets is fun and simple but it can bring great benefits to your community.', options: ['A. cleaning up', 'B. collecting', 'C. putting away', 'D. littering'], answer: 'D' },
                { type: 'mcq', text: '3. Surgeons need to be really <u>careful</u> when they perform operations. One mistake can cost the patient‚Äôs life.', options: ['A. unkind', 'B. disorganized', 'C. cautious', 'D. careless'], answer: 'D' },
                { type: 'mcq', text: '4. Working in an <u>organized</u> team can help increase productivity and personal growth.', options: ['A. tidy', 'B. chaotic', 'C. effective', 'D. efficient'], answer: 'B' },
                { type: 'mcq', text: '5. Family plays an <u>integral</u> part in our lives. It‚Äôs hard to live without family‚Äôs love and support.', options: ['A. important', 'B. huge', 'C. amazing', 'D. unnecessary'], answer: 'D' },
                { type: 'mcq', text: '6. Doing morning exercises is an <u>exciting</u> activity for students.', options: ['A. interesting', 'B. happy', 'C. hard', 'D. boring'], answer: 'D' },
                { type: 'mcq', text: '7. Our teacher <u>remembers</u> all of my classmates‚Äô birthday.', options: ['A. gives', 'B. forgets', 'C. asks', 'D. has'], answer: 'B' },
                { type: 'mcq', text: '8. Nancy is very <u>independent</u>. He lived by himself when he was 15 years old.', options: ['A. free', 'B. reliable', 'C. dependable', 'D. dependent'], answer: 'D' },
                { type: 'mcq', text: '9. I‚Äôve just had a <u>terrible</u> thought. He may never come back from the battle field.', options: ['A. awful', 'B. horrible', 'C. fantastic', 'D. dreadful'], answer: 'C' },
                { type: 'mcq', text: '10. The law <u>protects</u> ancient monuments and old churches.', options: ['A. modern', 'B. old', 'C. traditional', 'D. historic'], answer: 'A' }
            ],
            put_verbs: [
                { type: 'fill', text: 'PUT THE VERBS IN THE CORRECT FORM', answer: '' },
                { type: 'fill', text: '1. Would you like if I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..(close) the windows?', answer: 'closed' },
                { type: 'fill', text: '2. What would happen if I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(not do) that?', answer: 'did not do' },
                { type: 'fill', text: '3. He couldn‚Äôt understand if we ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..(not explain) more.', answer: 'did not explain' },
                { type: 'fill', text: '4. If we didn‚Äôt visit her, she ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(be) very sad.', answer: 'would be' },
                { type: 'fill', text: '5. We ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(not be) tired if we didn‚Äôt try to do that', answer: 'would not be' },
                { type: 'fill', text: '6. I (buy) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. a car if you lend me some money.', answer: 'will buy' },
                { type: 'fill', text: '7. If the book (not be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.expensive, I\'ll buy it.', answer: 'is not' },
                { type: 'fill', text: '8. I\'ll go out if it (not rain) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..', answer: 'does not rain' },
                { type: 'fill', text: '9. If that hat costs much, I (buy) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶a small one.', answer: 'will buy' },
                { type: 'fill', text: '10. If she (make) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.that mistake again, her teacher will get angry with her.', answer: 'makes' },
                { type: 'fill', text: '11. I will lend them some money if they (ask) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.me.', answer: 'ask' },
                { type: 'fill', text: '12. My dog will bark if it (hear) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶any strange sound.', answer: 'hears' },
                { type: 'fill', text: '13. They (let) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.you in if you come late.', answer: 'will let' },
                { type: 'fill', text: '14. He‚Äôs waiting for his mother to come back from Chicago. If his mother (come) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶home, he will have a lot of presents.', answer: 'comes' },
                { type: 'fill', text: '15. The kitchen will look better if we (have) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.red curtains.', answer: 'have' },
                { type: 'fill', text: '16. If I refused, he ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.(be) very disappointed.', answer: 'would be' },
                { type: 'fill', text: '17. I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(take) this job if I were out of work now.', answer: 'would take' },
                { type: 'fill', text: '18. You would be very upset if you ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(lose) it.', answer: 'lost' },
                { type: 'fill', text: '19. He would feel better if he ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(exercise) more.', answer: 'exercised' },
                { type: 'fill', text: '20. If I ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..(have) a lot of money, I will travel around the world.', answer: 'had' },
                { type: 'fill', text: '21. I (tell)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. the answer if I knew it.', answer: 'would tell' },
                { type: 'fill', text: '22. If we ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(not come) she would feel lonely.', answer: 'did not come' },
                { type: 'fill', text: '23. If we didn‚Äôt take this job, we‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. (not earn) a lot of money.', answer: 'would not earn' },
                { type: 'fill', text: '24. If he knew that it was dangerous, he (not come)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶', answer: 'would not come' },
                { type: 'fill', text: '25. If you (see) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..someone drowning, what would you do?', answer: 'saw' },
                { type: 'fill', text: '26. If you slept under a mosquito net, you (not be)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..bitten so often.', answer: 'would not be' },
                { type: 'fill', text: '27. If he (speak) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.more slowly, we will understand him.', answer: 'speaks' },
                { type: 'fill', text: '28. We would be in Hanoi now if the weather (not be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..so bad.', answer: 'was not' },
                { type: 'fill', text: '29. If he did not play games online too much, he (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..a good student now.', answer: 'would be' },
                { type: 'fill', text: '30. They wouldn\'t come to the party if you (not invite) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶them.', answer: 'did not invite' },
                { type: 'fill', text: '31. What would you do if you (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..him?', answer: 'were' },
                { type: 'fill', text: '32. If I spoke English, my job (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.a lot easier.', answer: 'would be' },
                { type: 'fill', text: '33. If he (have) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶enough money, he would buy a house.', answer: 'had' },
                { type: 'fill', text: '34. If I (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.you, I would tell the truth.', answer: 'were' },
                { type: 'fill', text: '35. If I knew his address, I (go) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..round and see him.', answer: 'would go' },
                { type: 'fill', text: '36. It‚Äôs too bad Helen isn‚Äôt here. If she (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.here, she could know what to do.', answer: 'were' },
                { type: 'fill', text: '37. If Betty (not / like)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ the sweater, she will exchange it.', answer: 'does not like' },
                { type: 'fill', text: '38. What ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..you (do)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. if you have a million dollars?', answer: 'would you do' },
                { type: 'fill', text: '39. You will get much higher marks if you (study) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. harder.', answer: 'study' },
                { type: 'fill', text: '40. If he (not/ ask)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ me , I will not tell him anything.', answer: 'does not ask' },
                { type: 'fill', text: '41. Father will surely get wet if he (not/ take)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶ his umbrella.', answer: 'does not take' },
                { type: 'fill', text: '42. If I (be)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.. in your place, I will accept his offer.', answer: 'were' },
                { type: 'fill', text: '43. If it ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶(rain) we will stay at home.', answer: 'rains' },
                { type: 'fill', text: '44. If I see him , I _____ (give ) him a gift.', answer: 'will give' },
                { type: 'fill', text: '45. If I had a typewriter, I _____ (type) it myself.', answer: 'would type' },
                { type: 'fill', text: '46. If I had known that you were in hospital, I _____ (visit) you.', answer: 'would have visited' },
                { type: 'fill', text: '47. You could make better progress if you _____ (attend) class regularly.', answer: 'attended' },
                { type: 'fill', text: '48. If I _____ (know) his telephone number, I‚Äôd give it to you.', answer: 'knew' },
                { type: 'fill', text: '49. If you _____ (arrive) ten minutes earlier, you would have got a seat.', answer: 'had arrived' },
                { type: 'fill', text: '50. If you worked more slowly, he _____ (not make) so many mistakes.', answer: 'would not make' },
                { type: 'fill', text: '51. I shouldn‚Äôt drink that wine if I _____ (be) you.', answer: 'were' },
                { type: 'fill', text: '52. If I _____ (find) a cheap room, I will stay a fortnight.', answer: 'find' },
                { type: 'fill', text: '53. A lot of people _____ (be) out of work if the factory closed down.', answer: 'would be' },
                { type: 'fill', text: '54. I (do)__________it for you tomorrow.', answer: 'will do' },
                { type: 'fill', text: '55. My father (call)_____________you in 5 minutes.', answer: 'will call' },
                { type: 'fill', text: '56. We believe that she (recover)_______________from her illness soon.', answer: 'will recover' },
                { type: 'fill', text: '57. I promise I (return)______________to school on time.', answer: 'will return' },
                { type: 'fill', text: '58. If it rains, he (stay)____________at home.', answer: 'will stay' },
                { type: 'fill', text: '59. You (take) me to the zoo this weekend?', answer: 'will you take' },
                { type: 'fill', text: '60. I think he (not come)_______________back his hometown.', answer: 'will not come' },
                { type: 'fill', text: '61. ‚ÄòI haven‚Äôt got my phone.‚Äô ‚ÄòThat‚Äôs OK. I __________ (lend) you mine.‚Äô', answer: 'will lend' },
                { type: 'fill', text: '62. It‚Äôs Julia‚Äôs birthday next week, so we __________ (buy) her some flowers.', answer: 'will buy' },
                { type: 'fill', text: '63. Will you lend me ¬£10? I promise I __________ (give) it back to you tomorrow.', answer: 'will give' },
                { type: 'fill', text: '64. We __________ (have) a barbecue tomorrow. It‚Äôs all planned, so I hope it won‚Äôt rain.', answer: 'will have' },
                { type: 'fill', text: '65. ‚ÄòJim‚Äôs starting university tomorrow.‚Äô ‚ÄòWhat __________ (he/ study)?‚Äô', answer: 'will he study' },
                { type: 'fill', text: '66. You __________ (not like) that film. It‚Äôs very frightening. Let‚Äôs choose another one.', answer: 'will not like' },
                { type: 'fill', text: '67. Do you think they __________ (like) the presents we got for them?', answer: 'will like' },
                { type: 'fill', text: '68. Look! The coach __________ (leave)! Run or we‚Äôll miss it.', answer: 'is leaving' },
                { type: 'fill', text: '69. I love London. I (probably / go) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.there next year.', answer: 'will probably go' },
                { type: 'fill', text: '70. What (wear / you) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶at the party tonight?', answer: 'will you wear' },
                { type: 'fill', text: '71. I haven\'t made up my mind yet. But I think I (find) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶something nice in my mum\'s wardrobe.', answer: 'will find' },
                { type: 'fill', text: '72. I completely forget about this. Give me a moment, I (do)‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶. it now.', answer: 'will do' },
                { type: 'fill', text: '73. Tonight, I (stay) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.home. I\'ve rented a video.', answer: 'will stay' },
                { type: 'fill', text: '74. I feel dreadful. I (be) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.sick.', answer: 'am going to be' },
                { type: 'fill', text: '75. If you have any problem, I (help) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶.you.', answer: 'will help' },
                { type: 'fill', text: '76. The weather forecast says it (not/ rain) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶..tomorrow', answer: 'will not rain' },
                { type: 'fill', text: '77. I promise that I (not/ come) ‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶late.', answer: 'will not come' }
            ],
            reading: [
                { type: 'mcq', text: 'Exercise 5: Read the passages below and choose the correct answer among A, B, C or D.', options: [], answer: '' },
                { type: 'mcq', text: 'C√¢u 1: According to the writer.', options: ['A. English is popular in much of the world', 'B. English is useful only to teenagers.', 'C. No children like learning English', 'D. Only adults learn English.'], answer: 'A' },
                { type: 'mcq', text: 'C√¢u 2: Many people learn English by', options: ['A. hearing the language in the office', 'B. watch video only', 'C. taking with the film stars', 'D. working hard on their lessons.'], answer: 'D' },
                { type: 'mcq', text: 'C√¢u 3: Many boys and girls learn English because', options: ['A. their parents make them', 'B. they have to study their own language', 'C. English can give them a job', 'D. It is included in their courses'], answer: 'D' },
                { type: 'mcq', text: 'C√¢u 4: Many adults learn English because.', options: ['A. They want to go abroad', 'B. It helps them in their work', 'C. Most of their books are in English', 'D. Their work is useful'], answer: 'B' },
                { type: 'mcq', text: 'C√¢u 5: In America or in Australia, many schoolchildren study', options: ['A. Such foreign languages as French, German and Spanish', 'B. English as a foreign language', 'C. English and mathematics only.', 'D. Their own language and no foreign language'], answer: 'A' }
            ]
        };
        const EXERCISE_TITLES = {
            pronunciation: 'Exercise 1: PHONETICS - PRONUNCIATION',
            stress: 'WORD STRESS',
            exercise3_fill: 'Exercise 3: GRAMMAR & VOCABULARY - FILL IN THE BLANKS',
            exercise3_mcq: 'Exercise 3: GRAMMAR & VOCABULARY - MULTIPLE CHOICE',
            vocabulary_jobs: 'VOCABULARY - JOBS & WORK',
            verb_tenses_mcq: 'VERB TENSES - MULTIPLE CHOICE',
            synonyms: 'SYNONYMS',
            antonyms: 'ANTONYMS',
            put_verbs: 'PUT THE VERBS IN THE CORRECT FORM',
            reading: 'Exercise 5: READING COMPREHENSION'
        };
        let allRealQuestions = [];
        let currentQuestions = [];
        let currentIndex = 0;
        let streak = 0;
        let currentMainMode = '';
        let currentModeText = '';
        let isPhase2 = false;
        let totalQuestions = 0;
        let halfPoint = 0;

        function shuffle(array) {
            const copy = [...array];
            for (let i = copy.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [copy[i], copy[j]] = [copy[j], copy[i]];
            }
            return copy;
        }

        function getAllRealQuestions() {
            let all = [];
            Object.values(parts).forEach(part => {
                part.forEach(q => {
                    if (q.answer !== '' && q.type) all.push({ ...q });
                });
            });
            return all;
        }

        function prepareQuestions() {
            allRealQuestions = getAllRealQuestions();
            totalQuestions = allRealQuestions.length;
            halfPoint = Math.ceil(totalQuestions / 2);

            const shuffled = shuffle(allRealQuestions);
            currentQuestions = shuffled;
        }

        function addExerciseTitle() {
            currentQuestions.forEach(q => {
                for (const [key, value] of Object.entries(parts)) {
                    if (value.some(pq => pq.text === q.text && pq.answer === q.answer)) {
                        q.exerciseTitle = EXERCISE_TITLES[key] || '';
                        break;
                    }
                }
            });
        }

        function renderQuestionBody(q) {
            if (q.type === 'mcq') {
                return q.options.map((opt, idx) => `
                    <label class="option">
                        <input type="radio" name="challenge_q" value="${opt.charAt(0)}" data-key="${idx + 1}">
                        ${opt}
                    </label>
                `).join('');
            }
            if (q.type === 'fill') {
                return `<input id="challenge_fill" class="fill-input" type="text" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi" autofocus>`;
            }
            return '';
        }

        // Theme & settings
        document.querySelectorAll('.theme-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.dataset.theme || 'default';
                document.documentElement.setAttribute('data-theme', theme);
                document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        document.getElementById('settings-btn').addEventListener('click', e => {
            e.stopPropagation();
            document.getElementById('setting-overlay').classList.toggle('show');
        });

        document.getElementById('setting-overlay').addEventListener('click', e => {
            if (e.target === document.getElementById('setting-overlay')) {
                document.getElementById('setting-overlay').classList.remove('show');
            }
        });

        // Ch·ªçn ch·∫ø ƒë·ªô
        document.getElementById('select-exam').addEventListener('click', () => {
            currentMainMode = 'exam';
            currentModeText = 'Ch·∫ø ƒë·ªô thi - Full b·ªô ƒë·ªÅ (2 giai ƒëo·∫°n)';
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            document.getElementById('exam-mode').classList.remove('hidden');
            startExamMode();
        });

        document.getElementById('select-challenge').addEventListener('click', () => {
            currentMainMode = 'challenge';
            currentModeText = 'Ch·∫ø ƒë·ªô th·ª≠ th√°ch - Full b·ªô ƒë·ªÅ (2 giai ƒëo·∫°n)';
            document.getElementById('mode-selection').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            document.getElementById('challenge-mode').classList.remove('hidden');
            startChallengeMode();
        });

        // === CH·∫æ ƒê·ªò THI ===
        function startExamMode() {
            if (isPhase2) return; // ƒë√£ x·ª≠ l√Ω ·ªü n√∫t sang phase 2
            prepareQuestions();
            addExerciseTitle();

            const questionsToShow = currentQuestions.slice(0, halfPoint);
            const container = document.getElementById('exam-questions');
            container.innerHTML = '';

            questionsToShow.forEach((q, i) => {
                const card = document.createElement('div');
                card.className = 'card question-card';
                let html = `<div class="question-num">C√¢u ${i + 1}</div>
                            <div class="part-title text-lg">${q.exerciseTitle || ''}</div>
                            <div class="question-text">${q.text}</div>`;
                if (q.type === 'mcq') {
                    html += `<div class="flex flex-col gap-4">`;
                    q.options.forEach(opt => {
                        html += `<label class="option"><input type="radio" name="q${i}" value="${opt.charAt(0)}">${opt}</label>`;
                    });
                    html += `</div>`;
                } else if (q.type === 'fill') {
                    html += `<input type="text" class="fill-input" name="q${i}" placeholder="Nh·∫≠p ƒë√°p √°n...">`;
                }
                card.innerHTML = html;
                container.appendChild(card);
            });
        }

        document.getElementById('submit-exam').addEventListener('click', async () => {
            if (!confirm('Ch·∫Øc ch·∫Øn n·ªôp b√†i giai ƒëo·∫°n 1?')) return;

            const questionsToCheck = currentQuestions.slice(0, halfPoint);
            let correct = 0;

            questionsToCheck.forEach((q, i) => {
                if (q.type === 'mcq') {
                    const selected = document.querySelector(`input[name="q${i}"]:checked`);
                    if (selected && selected.value === q.answer) correct++;
                } else if (q.type === 'fill') {
                    const input = document.querySelector(`input[name="q${i}"]`);
                    if (input) {
                        const user = input.value.trim().toLowerCase().replace(/\s+/g, ' ');
                        const ans = q.answer.toLowerCase().replace(/\s+/g, ' ');
                        if (user === ans) correct++;
                    }
                }
            });

            const score10 = Math.round((correct / halfPoint) * 10 * 100) / 100;
            document.getElementById('exam-result-text').innerHTML = `
                ${correct} / ${halfPoint} c√¢u ƒë√∫ng<br>
                <span style="color:var(--success-color)">${score10} ƒëi·ªÉm</span>
            `;
            document.getElementById('exam-result').classList.remove('hidden');
            document.getElementById('submit-exam').classList.add('hidden');
        });

        document.getElementById('start-phase2-exam').addEventListener('click', () => {
            isPhase2 = true;
            document.getElementById('exam-result').classList.add('hidden');
            document.getElementById('exam-questions').innerHTML = '';
            document.getElementById('submit-exam').classList.remove('hidden');
            document.getElementById('submit-exam').textContent = 'N·ªòP B√ÄI & HO√ÄN TH√ÄNH';

            const questionsToShow = currentQuestions.slice(halfPoint);
            const container = document.getElementById('exam-questions');

            questionsToShow.forEach((q, i) => {
                const card = document.createElement('div');
                card.className = 'card question-card';
                let html = `<div class="question-num">C√¢u ${halfPoint + i + 1}</div>
                            <div class="part-title text-lg">${q.exerciseTitle || ''}</div>
                            <div class="question-text">${q.text}</div>`;
                if (q.type === 'mcq') {
                    html += `<div class="flex flex-col gap-4">`;
                    q.options.forEach(opt => {
                        html += `<label class="option"><input type="radio" name="q${i}" value="${opt.charAt(0)}">${opt}</label>`;
                    });
                    html += `</div>`;
                } else if (q.type === 'fill') {
                    html += `<input type="text" class="fill-input" name="q${i}" placeholder="Nh·∫≠p ƒë√°p √°n...">`;
                }
                card.innerHTML = html;
                container.appendChild(card);
            });
        });

        // Khi n·ªôp giai ƒëo·∫°n 2 (n√∫t v·∫´n l√† submit-exam nh∆∞ng text ƒë√£ ƒë·ªïi)
        document.getElementById('submit-exam').addEventListener('click', async function finalSubmit() {
            if (isPhase2 && confirm('Ch·∫Øc ch·∫Øn n·ªôp b√†i v√† ho√†n th√†nh to√†n b·ªô?')) {
                const questionsToCheck = currentQuestions.slice(halfPoint);
                let correct = 0;
                questionsToCheck.forEach((q, i) => {
                    if (q.type === 'mcq') {
                        const selected = document.querySelector(`input[name="q${i}"]:checked`);
                        if (selected && selected.value === q.answer) correct++;
                    } else if (q.type === 'fill') {
                        const input = document.querySelector(`input[name="q${i}"]`);
                        if (input) {
                            const user = input.value.trim().toLowerCase().replace(/\s+/g, ' ');
                            const ans = q.answer.toLowerCase().replace(/\s+/g, ' ');
                            if (user === ans) correct++;
                        }
                    }
                });
                const score10 = Math.round((correct / (totalQuestions - halfPoint)) * 10 * 100) / 100;
                document.getElementById('exam-result-text').innerHTML = `
                    HO√ÄN TH√ÄNH TO√ÄN B·ªò!<br>
                    Giai ƒëo·∫°n 2: ${correct} / ${totalQuestions - halfPoint} c√¢u ƒë√∫ng<br>
                    <span style="color:var(--success-color)">${score10} ƒëi·ªÉm (giai ƒëo·∫°n 2)</span>
                `;
                document.getElementById('exam-result').classList.remove('hidden');
                document.getElementById('submit-exam').classList.add('hidden');
                await sendToDiscord({ mode: currentModeText + ' - Giai ƒëo·∫°n 2', score: correct, total: totalQuestions - halfPoint });
            }
        });

        // === CH·∫æ ƒê·ªò TH·ª¨ TH√ÅCH ===
        function startChallengeMode() {
            prepareQuestions();
            addExerciseTitle();
            currentIndex = 0;
            streak = 0;
            document.getElementById('current-streak').textContent = '0';
            document.getElementById('challenge-phase1-complete').classList.add('hidden');
            showChallengeQuestion();
        }

        function showChallengeQuestion() {
            const q = currentQuestions[currentIndex];
            document.getElementById('challenge-progress').textContent = `C√¢u ${currentIndex + 1} / ${currentQuestions.length} (Giai ƒëo·∫°n ${isPhase2 ? 2 : 1})`;
            let html = `<div class="part-title">${q.exerciseTitle || ''}</div>
                        <div class="question-text">${q.text}</div>
                        ${renderQuestionBody(q)}`;
            document.getElementById('current-question').innerHTML = html;
            document.getElementById('challenge-feedback').classList.add('hidden');
            document.getElementById('submit-current').classList.remove('hidden');
            document.getElementById('next-question').classList.add('hidden');
            const fillInput = document.getElementById('challenge_fill');
            if (fillInput) fillInput.focus();
        }

        document.getElementById('submit-current').addEventListener('click', async () => {
            const q = currentQuestions[currentIndex];
            let isCorrect = false;
            if (q.type === 'mcq') {
                const selected = document.querySelector('input[name="challenge_q"]:checked');
                if (!selected) return alert('Ch·ªçn ƒë√°p √°n ƒëi!');
                isCorrect = selected.value === q.answer;
            } else if (q.type === 'fill') {
                const input = document.getElementById('challenge_fill');
                if (!input || !input.value.trim()) return alert('Nh·∫≠p ƒë√°p √°n!');
                const user = input.value.trim().toLowerCase().replace(/\s+/g, ' ');
                const ans = q.answer.toLowerCase().replace(/\s+/g, ' ');
                isCorrect = user === ans;
            }

            const fb = document.getElementById('challenge-feedback');
            if (isCorrect) {
                streak++;
                document.getElementById('current-streak').textContent = streak;
                fb.innerHTML = `<strong class="text-3xl">ƒê√öNG R·ªíI üéâ</strong>`;
                fb.className = 'feedback correct show';
                document.getElementById('next-question').classList.remove('hidden');
            } else {
                fb.innerHTML = `
                    <strong class="text-3xl">SAI R·ªíI üòû</strong><br>
                    ƒê√°p √°n ƒë√∫ng: <strong>${q.answer}</strong><br>
                    Chu·ªói ƒë√∫ng: ${streak}/${currentQuestions.length}<br>
                    L√†m l·∫°i sau <span id="countdown" class="text-4xl font-bold text-[var(--danger-color)]">10</span> gi√¢y
                `;
                fb.className = 'feedback wrong show';
                await sendToDiscord({ mode: currentModeText, streak: streak, total: currentQuestions.length });
                let t = 10;
                const timer = setInterval(() => {
                    document.getElementById('countdown').textContent = --t;
                    if (t <= 0) { clearInterval(timer); location.reload(); }
                }, 1000);
            }
            fb.classList.remove('hidden');
            document.getElementById('submit-current').classList.add('hidden');
        });

        document.getElementById('next-question').addEventListener('click', () => {
            currentIndex++;
            if (!isPhase2 && currentIndex === halfPoint) {
                document.getElementById('final-streak-phase1').textContent = streak;
                document.getElementById('challenge-phase1-complete').classList.remove('hidden');
                document.getElementById('current-question').classList.add('hidden');
                document.getElementById('challenge-feedback').classList.add('hidden');
                return;
            }
            if (currentIndex >= currentQuestions.length) {
                document.getElementById('current-question').innerHTML = `
                    <div class="text-4xl font-bold text-[var(--success-color)] mt-12">HO√ÄN TH√ÄNH TO√ÄN B·ªò! üèÜ</div>
                    <div class="text-3xl mt-8">Chu·ªói ƒë√∫ng cu·ªëi c√πng: ${streak}/${currentQuestions.length}</div>
                    <button class="submit-btn card mt-12" onclick="location.reload()">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
                `;
                sendToDiscord({ mode: currentModeText, streak: streak, total: currentQuestions.length });
            } else {
                showChallengeQuestion();
            }
        });

        document.getElementById('start-phase2-challenge').addEventListener('click', () => {
            isPhase2 = true;
            currentIndex = halfPoint;
            streak = 0;
            document.getElementById('current-streak').textContent = '0';
            document.getElementById('challenge-phase1-complete').classList.add('hidden');
            document.getElementById('current-question').classList.remove('hidden');
            showChallengeQuestion();
        });

        // Ph√≠m t·∫Øt
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('quiz-area').classList.contains('hidden')) return;
            if (['1','2','3','4'].includes(e.key)) {
                e.preventDefault();
                const keyMap = { '1': 'A', '2': 'B', '3': 'C', '4': 'D' };
                const value = keyMap[e.key];
                if (currentMainMode === 'challenge') {
                    const option = document.querySelector(`input[data-key="${e.key}"]`);
                    if (option) option.checked = true;
                } else {
                    const radios = document.querySelectorAll(`input[type="radio"][value="${value}"]`);
                    for (let r of radios) {
                        if (!r.closest('.question-card').querySelector('input[type="radio"]:checked')) {
                            r.checked = true;
                            r.scrollIntoView({behavior: "smooth", block: "center"});
                            break;
                        }
                    }
                }
            }
            if (e.key === 'Enter') {
                e.preventDefault();
                if (currentMainMode === 'challenge') {
                    if (!document.getElementById('submit-current').classList.contains('hidden')) {
                        document.getElementById('submit-current').click();
                    } else if (!document.getElementById('next-question').classList.contains('hidden')) {
                        document.getElementById('next-question').click();
                    }
                }
            }
        });

        document.getElementById('back-to-mode').addEventListener('click', () => location.reload());
    </script>
</body>
</html>

